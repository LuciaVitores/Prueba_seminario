---
title: "Natalidad en función del PIB por comunidad autónoma."
author: "Lucía Vítores e Irene Gamazo"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Este repositorio ha sido creado para almacenar la información correspondiente con los valores de la natalidad por comunidades autónomas relacionadas con los índices del producto interior burto (PIB) en España. 

La información usada para realizar este trabajo ha sido obtenida en [Instituto Nacional de Estadística](https://www.ine.es/).

### __Natalidad y PIB.__
Al contrario de lo que se podría esperar, cuanta mayor riqueza tiene zona y por tanto, mayor PIB, la tasa de natalidad es notablemente inferior comparada con otras zonas con un PIB más bajo.


### __Objetivos.__
Los principales objetivos de este repositorio son:

+ Estudiar graficamente los niveles de natalidad desde 2016 hasta 2020 en cada comunidad autónoma española. 
+ Conocer el valor del PIB correspondiente a cada comunidad autónoma española.
+ Comparar el crecimiento económico de las 19 comunidades autónomas españolas.
+ Relacionar estos niveles de natalidad en nuestro periodo de tiempo estudiado con los valores del PIB por comunidad autónoma.

### __Inserción de tablas.__
Insertaremos las tablas con los datos obtenidos sobre la natalidad en las comunidades autónomas españolas entre los años 2016 y 2020, así como los valores del PIB correspondientes a estos años. 

Primeros indicamos los paquetes de R que vamos a usar. 

```{r ,warning=FALSE,message=FALSE}
#install.packages('DT')
library(readxl)
library(DT)
library(tidyverse)
library(ggplot2)
```

Los datos de las tablas descargadas tenían un número delante de cada nombre de la comunidad, de forma que hemos tenido que eliminarlo para evitar posibles errores. 
Para ello hemos usado la función __mutate__, donde hemos relacionado los levels (nombres que venían descritos) con los labels (nombres que queríamos usar). 

_Tabla sobre el nacimiento en el año 2016._
```{r}
X2016_2 <- read_excel("INPUT/Nacimiento - PIB/2016.2.xls") %>% 
mutate(`Comunidades autónomas` = factor(`Comunidades autónomas`,
levels = c("01 Andalucía", "02 Aragón", "03 Asturias, Principado de", "04 Balears, Illes","05 Canarias", "06 Cantabria", "07 Castilla y León", "08 Castilla - La Mancha", "09 Cataluña", "10 Comunitat Valenciana","11 Extremadura", "12 Galicia", "13 Madrid, Comunidad de", "14 Murcia, Región de", "15 Navarra, Comunidad Foral de", "16 País Vasco", "17 Rioja, La", "18 Ceuta", "19 Melilla"),
labels = c("Andalucía", "Aragón", "Asturias", "Baleares", "Canarias", "Cantabria", "Castilla y León", "Castilla la Mancha", "Cataluña","Valencia", "Extremadura", "Galicia", "Madrid", "Murcia", "Navarra","Pais Vasco", "La Rioja", "Ceuta","Melilla")))
DT::datatable(X2016_2)
```

```{r , message=FALSE} 
data("X2016_2")
ggplot(data = X2016_2, aes(x = `Comunidades autónomas` , y = Total)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_point()
  
```

_Tabla sobre el nacimiento en el año 2017._
```{r}
X2017_2 <- read_excel("INPUT/Nacimiento - PIB/2017.2.xls")%>% 
mutate(`Comunidades autónomas` = factor(`Comunidades autónomas`,
levels = c("01 Andalucía", "02 Aragón", "03 Asturias, Principado de", "04 Balears, Illes","05 Canarias", "06 Cantabria", "07 Castilla y León", "08 Castilla - La Mancha", "09 Cataluña", "10 Comunitat Valenciana","11 Extremadura", "12 Galicia", "13 Madrid, Comunidad de", "14 Murcia, Región de", "15 Navarra, Comunidad Foral de", "16 País Vasco", "17 Rioja, La", "18 Ceuta", "19 Melilla"),
labels = c("Andalucía", "Aragón", "Asturias", "Baleares", "Canarias", "Cantabria", "Castilla y León", "Castilla la Mancha", "Cataluña","Valencia", "Extremadura", "Galicia", "Madrid", "Murcia", "Navarra","Pais Vasco", "La Rioja", "Ceuta","Melilla")))
DT::datatable(X2017_2)
```

```{r , message=FALSE} 
data("X2017_2")
ggplot(data = X2017_2, aes(x = `Comunidades autónomas` , y = Total)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_point()
  
```

_Tabla sobre el nacimiento en el año 2018._
```{r}
X2018_2 <- read_excel("INPUT/Nacimiento - PIB/2018.2.xls")%>% 
mutate(`Comunidades autónomas` = factor(`Comunidades autónomas`,
levels = c("01 Andalucía", "02 Aragón", "03 Asturias, Principado de", "04 Balears, Illes","05 Canarias", "06 Cantabria", "07 Castilla y León", "08 Castilla - La Mancha", "09 Cataluña", "10 Comunitat Valenciana","11 Extremadura", "12 Galicia", "13 Madrid, Comunidad de", "14 Murcia, Región de", "15 Navarra, Comunidad Foral de", "16 País Vasco", "17 Rioja, La", "18 Ceuta", "19 Melilla"),
labels = c("Andalucía", "Aragón", "Asturias", "Baleares", "Canarias", "Cantabria", "Castilla y León", "Castilla la Mancha", "Cataluña","Valencia", "Extremadura", "Galicia", "Madrid", "Murcia", "Navarra","Pais Vasco", "La Rioja", "Ceuta","Melilla")))
DT::datatable(X2018_2)
```

```{r , message=FALSE} 
data("X2018_2")
ggplot(data = X2018_2, aes(x = `Comunidades autónomas` , y = Total)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_point()
  
```

_Tabla sobre el nacimiento en el año 2019._
```{r}
X2019_2 <- read_excel("INPUT/Nacimiento - PIB/2019.2.xls")%>% 
mutate(`Comunidades autónomas` = factor(`Comunidades autónomas`,
levels = c("01 Andalucía", "02 Aragón", "03 Asturias, Principado de", "04 Balears, Illes","05 Canarias", "06 Cantabria", "07 Castilla y León", "08 Castilla - La Mancha", "09 Cataluña", "10 Comunitat Valenciana","11 Extremadura", "12 Galicia", "13 Madrid, Comunidad de", "14 Murcia, Región de", "15 Navarra, Comunidad Foral de", "16 País Vasco", "17 Rioja, La", "18 Ceuta", "19 Melilla"),
labels = c("Andalucía", "Aragón", "Asturias", "Baleares", "Canarias", "Cantabria", "Castilla y León", "Castilla la Mancha", "Cataluña","Valencia", "Extremadura", "Galicia", "Madrid", "Murcia", "Navarra","Pais Vasco", "La Rioja", "Ceuta","Melilla")))
DT::datatable(X2019_2)
```

```{r , message=FALSE} 
data("X2019_2")
ggplot(data = X2019_2, aes(x = `Comunidades autónomas` , y = Total)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_point()
  
```

_Tabla sobre el nacimiento en el año 2020._
```{r}
X2020_2 <- read_excel("INPUT/Nacimiento - PIB/2020.2.xls")%>% 
mutate(`Comunidades autónomas` = factor(`Comunidades autónomas`,
levels = c("01 Andalucía", "02 Aragón", "03 Asturias, Principado de", "04 Balears, Illes","05 Canarias", "06 Cantabria", "07 Castilla y León", "08 Castilla - La Mancha", "09 Cataluña", "10 Comunitat Valenciana","11 Extremadura", "12 Galicia", "13 Madrid, Comunidad de", "14 Murcia, Región de", "15 Navarra, Comunidad Foral de", "16 País Vasco", "17 Rioja, La", "18 Ceuta", "19 Melilla"),
labels = c("Andalucía", "Aragón", "Asturias", "Baleares", "Canarias", "Cantabria", "Castilla y León", "Castilla la Mancha", "Cataluña","Valencia", "Extremadura", "Galicia", "Madrid", "Murcia", "Navarra","Pais Vasco", "La Rioja", "Ceuta","Melilla")))
DT::datatable(X2020_2)
```

```{r , message=FALSE} 
data("X2020_2")
ggplot(data = X2020_2, aes(x = `Comunidades autónomas` , y = Total)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_point()
  
```

_Tabla sobre el PIB._
```{r}
PIB2 <- read_excel("INPUT/Nacimiento - PIB/PIB2.xls")
DT::datatable(PIB2)
```

```{r , message=FALSE} 
data("PIB2")
ggplot(data = PIB2, aes(x = `Comunidades y ciudades autónomas`)) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  geom_bar()
  
```

```{r}
data("PIB2")
ggplot(data = PIB2)+
  geom_bar(
    mapping = aes(x = `Comunidades y ciudades autónomas`, fill = Total ),
    width = 1
  )+
  theme(aspect.ratio = 1)+
  labs(x= NULL, y = NULL)
```


```{r , message=FALSE} 
#data("PIB2")
#pivot_wider(data = PIB2, names_from = "variables", values_from = "valores")
#ggplot(data = PIB2, aes(x = 'Comunidades y ciudades autónomas')) +
#  geom_bar()
#pivot_wider(data = PIB2, names_from = "variables", values_from = "valores")
#rlang::last_error()

```




This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


